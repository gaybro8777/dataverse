<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="703pt" height="485pt" version="1.1" viewBox="0 0 703 485" style="width:703px;height:485px"><defs><filter id="f1" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text x="135" y="20.535" fill="#000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="434">Determine the User and Global Groups for an HTTP Request</text><rect width="389" height="75.932" x="282.5" y="189.598" fill="#FFF" stroke="#000" stroke-width="2" filter="url(#f1)"/><rect width="411.5" height="75.932" x="282.5" y="279.529" fill="#FFF" stroke="#000" stroke-width="2" filter="url(#f1)"/><line x1="23" x2="23" y1="113.977" y2="401.772" stroke="#A80036" stroke-dasharray="5 5" stroke-width="1"/><line x1="174" x2="174" y1="113.977" y2="401.772" stroke="#A80036" stroke-dasharray="5 5" stroke-width="1"/><line x1="333.5" x2="333.5" y1="113.977" y2="401.772" stroke="#A80036" stroke-dasharray="5 5" stroke-width="1"/><line x1="529" x2="529" y1="113.977" y2="401.772" stroke="#A80036" stroke-dasharray="5 5" stroke-width="1"/><line x1="653" x2="653" y1="113.977" y2="401.772" stroke="#A80036" stroke-dasharray="5 5" stroke-width="1"/><text x="5" y="111.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31">User</text><ellipse cx="23.5" cy="40.488" fill="#FEFECE" stroke="#A80036" stroke-width="2" filter="url(#f1)" rx="8" ry="8"/><path fill="#FEFECE" stroke="#A80036" stroke-width="2" d="M23.5,48.4883 L23.5,75.4883 M10.5,56.4883 L36.5,56.4883 M23.5,75.4883 L10.5,90.4883 M23.5,75.4883 L36.5,90.4883" filter="url(#f1)"/><text x="5" y="413.535" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="31">User</text><ellipse cx="23.5" cy="426.488" fill="#FEFECE" stroke="#A80036" stroke-width="2" filter="url(#f1)" rx="8" ry="8"/><path fill="#FEFECE" stroke="#A80036" stroke-width="2" d="M23.5,434.4883 L23.5,461.4883 M10.5,442.4883 L36.5,442.4883 M23.5,461.4883 L10.5,476.4883 M23.5,461.4883 L36.5,476.4883" filter="url(#f1)"/><rect width="63" height="30.488" x="141" y="78.488" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="148" y="99.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49">JsfPage</text><rect width="63" height="30.488" x="141" y="400" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="148" y="420.535" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="49">JsfPage</text><rect width="78" height="30.488" x="292.5" y="78.488" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="299.5" y="99.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64">UserBean</text><rect width="78" height="30.488" x="292.5" y="400" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="299.5" y="420.535" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="64">UserBean</text><rect width="163" height="30.488" x="446" y="78.488" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="453" y="99.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149">RoleAssigneeProvider</text><rect width="163" height="30.488" x="446" y="400" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="453" y="420.535" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="149">RoleAssigneeProvider</text><rect width="57" height="30.488" x="623" y="78.488" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="630" y="99.023" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43">Group</text><rect width="57" height="30.488" x="623" y="400" fill="#FEFECE" stroke="#A80036" stroke-width="1.5" filter="url(#f1)"/><text x="630" y="420.535" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43">Group</text><polygon fill="#A80036" stroke="#A80036" stroke-width="1" points="162.5 140.977 172.5 144.977 162.5 148.977 166.5 144.977"/><line x1="23.5" x2="168.5" y1="144.977" y2="144.977" stroke="#A80036" stroke-dasharray="2 2" stroke-width="1"/><text x="30.5" y="140.545" fill="#00F" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8">1</text><text x="42.5" y="140.545" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115">HTTP GET &lt;page&gt;</text><polygon fill="#A80036" stroke="#A80036" stroke-width="1" points="321.5 170.287 331.5 174.287 321.5 178.287 325.5 174.287"/><line x1="174.5" x2="327.5" y1="174.287" y2="174.287" stroke="#A80036" stroke-dasharray="2 2" stroke-width="1"/><text x="181.5" y="169.856" fill="#00F" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8">2</text><text x="193.5" y="169.856" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123">findUserAndGroups</text><rect width="389" height="75.932" x="282.5" y="189.598" fill="none" stroke="#000" stroke-width="2"/><polygon fill="#EEE" stroke="#000" stroke-width="2" points="282.5 189.598 356.5 189.598 356.5 196.598 346.5 206.598 282.5 206.598 282.5 189.598"/><text x="297.5" y="203.166" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29">loop</text><text x="371.5" y="202.232" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="295">[for each role assignee provider, until we get a user]</text><polygon fill="#A80036" stroke="#A80036" stroke-width="1" points="517.5 223.908 527.5 227.908 517.5 231.908 521.5 227.908"/><line x1="333.5" x2="523.5" y1="227.908" y2="227.908" stroke="#A80036" stroke-dasharray="2 2" stroke-width="1"/><text x="340.5" y="223.477" fill="#00F" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8">3</text><text x="352.5" y="223.477" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160">createUser( HttpRequest )</text><polygon fill="#A80036" stroke="#A80036" stroke-width="1" points="344.5 253.219 334.5 257.219 344.5 261.219 340.5 257.219"/><line x1="338.5" x2="528.5" y1="257.219" y2="257.219" stroke="#A80036" stroke-dasharray="2 2" stroke-width="1"/><text x="350.5" y="252.787" fill="#00F" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8">4</text><text x="362.5" y="252.787" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27">user</text><rect width="411.5" height="75.932" x="282.5" y="279.529" fill="none" stroke="#000" stroke-width="2"/><polygon fill="#EEE" stroke="#000" stroke-width="2" points="282.5 279.529 356.5 279.529 356.5 286.529 346.5 296.529 282.5 296.529 282.5 279.529"/><text x="297.5" y="293.098" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29">loop</text><text x="371.5" y="292.164" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="130">[for each global group]</text><polygon fill="#A80036" stroke="#A80036" stroke-width="1" points="641.5 313.84 651.5 317.84 641.5 321.84 645.5 317.84"/><line x1="333.5" x2="647.5" y1="317.84" y2="317.84" stroke="#A80036" stroke-dasharray="2 2" stroke-width="1"/><text x="340.5" y="313.408" fill="#00F" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8">5</text><text x="352.5" y="313.408" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205">isMemberOf( user, HttpRequest )</text><polygon fill="#A80036" stroke="#A80036" stroke-width="1" points="344.5 343.15 334.5 347.15 344.5 351.15 340.5 347.15"/><line x1="338.5" x2="652.5" y1="347.15" y2="347.15" stroke="#A80036" stroke-dasharray="2 2" stroke-width="1"/><text x="350.5" y="342.719" fill="#00F" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8">6</text><text x="362.5" y="342.719" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62">true/false</text><polygon fill="#A80036" stroke="#A80036" stroke-width="1" points="185.5 379.461 175.5 383.461 185.5 387.461 181.5 383.461"/><line x1="179.5" x2="332.5" y1="383.461" y2="383.461" stroke="#A80036" stroke-dasharray="2 2" stroke-width="1"/><text x="191.5" y="379.029" fill="#00F" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8">7</text><text x="203.5" y="379.029" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95">( user, groups )</text></g></svg>